# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Overview

This is a Shopify theme based on Dawn (v15.4.0), Shopify's reference theme. The theme follows Shopify's standard Liquid templating architecture with sections, snippets, and JSON templates.

## Theme Architecture

### Directory Structure

- **`layout/`**: Core layout files (`theme.liquid`, `password.liquid`)
- **`sections/`**: Reusable page sections (50+ files including `header.liquid`, `footer.liquid`, `featured-collection.liquid`, etc.)
- **`snippets/`**: Smaller reusable components (35+ files including `card-product.liquid`, `buy-buttons.liquid`, `cart-drawer.liquid`, etc.)
- **`templates/`**: Page templates in JSON format that compose sections (e.g., `index.json`, `product.json`, `collection.json`)
- **`config/`**: Theme configuration files:
  - `settings_schema.json`: Defines theme customization options in the admin
  - `settings_data.json`: Auto-generated file with current theme settings (DO NOT manually edit)
- **`assets/`**: Static files (32 JavaScript files, 65 CSS files, images)
- **`locales/`**: Translation files for internationalization (50+ locale files)

### Key Architectural Patterns

**Sections System**: Shopify sections are modular, reusable content blocks. Section groups (`header-group.json`, `footer-group.json`) allow multiple sections to be composed together. Most files in `sections/` are auto-generated via the theme editor.

**JSON Templates**: Templates like `templates/index.json` and `templates/product.json` are composed of sections and their settings. These files are auto-generated by the Shopify theme editor.

**Component Architecture**: Snippets are small, reusable Liquid components. Common patterns:
- Card components: `card-product.liquid`, `card-collection.liquid`, `article-card.liquid`
- Interactive components: `buy-buttons.liquid`, `cart-drawer.liquid`, `facets.liquid`
- Utility snippets: `icon-*.liquid`, `loading-spinner.liquid`, `pagination.liquid`

**Asset Loading**: The theme uses deferred JavaScript loading. Core scripts in `layout/theme.liquid`:
- `constants.js`, `pubsub.js`, `global.js` (always loaded)
- `animations.js` (conditionally loaded based on settings)
- Component-specific JS files loaded by their respective sections

**Color Schemes**: The theme uses a flexible color scheme system defined in `settings_schema.json`. Multiple scheme presets (scheme-1 through scheme-5) can be applied to different sections.

## Development Workflow

### Working with Shopify CLI

This theme should be developed using Shopify CLI. Common commands:

```bash
# Start development server (watch for changes and sync to dev store)
shopify theme dev

# Push theme to Shopify
shopify theme push

# Pull theme from Shopify
shopify theme pull

# Check theme for errors
shopify theme check
```

### File Modification Guidelines

**Auto-Generated Files**: Files with the header comment "IMPORTANT: The contents of this file are auto-generated" should be modified through the Shopify theme editor, not directly. This includes:
- `config/settings_data.json`
- `sections/header-group.json`
- `sections/footer-group.json`
- Most template JSON files

**Safe to Edit**:
- Custom sections you create
- Snippet files
- Asset files (CSS, JS)
- `config/settings_schema.json` (defines what's customizable)

### Liquid Template Development

**Common Liquid Patterns**:
```liquid
{%- liquid
  assign variable = settings.some_setting
  if condition
    echo "output"
  endif
-%}
```

**Section Schema**: Each section file typically contains:
1. Liquid markup
2. Schema definition in `{% schema %}` tag (JSON defining settings, blocks, presets)
3. Optional stylesheet in `{% stylesheet %}` tag
4. Optional JavaScript in `{% javascript %}` tag

**Rendering Snippets**:
```liquid
{% render 'snippet-name', variable: value %}
```

### JavaScript Architecture

The theme uses vanilla JavaScript with Web Components:
- Component classes extend `HTMLElement`
- Utility classes for common functionality (e.g., `SectionId`, `HTMLUpdateUtility` in `global.js`)
- PubSub pattern for inter-component communication (`pubsub.js`)

### CSS Organization

CSS follows a component-based structure:
- `base.css`: Core styles and CSS variables
- `component-*.css`: Component-specific styles matching sections/snippets
- Styles can be scoped to sections via the `{% stylesheet %}` tag

## Theme Settings

Theme customization is controlled via `config/settings_schema.json`:
- Logo and branding
- Typography (header and body fonts)
- Color schemes
- Layout settings (page width, spacing)
- Component styling (buttons, cards, inputs, etc.)
- Animations
- Cart behavior
- Search configuration

## Testing and Quality

Use Shopify's theme checker:
```bash
shopify theme check
```

This validates Liquid syntax, accessibility, and Shopify best practices.

## Metafields

Metafields configuration is stored in `.shopify/metafields.json`. This file defines custom metafield definitions for products, collections, variants, and other resources.
